<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <title>Mukul Visuals</title>
    
    <!-- Font Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons (Required for Chat) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* --- THEME VARIABLES --- */
        :root {
            --primary-orange: #FF6701;
            --secondary-orange: #FEA82F;
            --text-dark: #333333;
            --text-gray: #666666;
            --white: #ffffff;
            --brand-gradient: linear-gradient(to bottom, #FFC288, #FF6701);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #ffffff;
            color: #333333;
            line-height: 1.6;
            overflow-x: hidden;
            min-width: 320px;
            padding-top: 80px; /* Add padding to account for fixed header */
        }

        /* Enhanced Sticky Header - Standardized */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .header.scrolled {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 15px;
            max-width: 1150px;
            margin: 0 auto;
            position: relative;
            min-height: 64px;
        }

        @media (min-width: 768px) {
            .header-content {
                padding: 25px 50px;
                min-height: 80px;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                padding: 15px 20px;
                min-height: 60px;
            }
            body { padding-top: 70px; }
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 12px;
            font-weight: 600;
            color: #555555;
            text-decoration: none;
            flex-shrink: 0;
            transition: all 0.3s ease;
            position: relative;
            letter-spacing: 0.4px;
        }

        .logo:hover {
            transform: translateY(-1px);
            color: #FF6701;
        }

        @media (min-width: 768px) { .logo { font-size: 16px; } }

        .logo-img {
            width: 22px;
            height: 22px;
            margin-right: 8px;
            object-fit: contain;
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .logo:hover .logo-img { transform: rotate(5deg) scale(1.1); }

        @media (min-width: 768px) {
            .logo-img {
                width: 25px;
                height: 25px;
                margin-right: 6px;
                margin-left: 20px;
            }
        }

        /* Enhanced Navigation */
        .nav { display: flex; gap: 12px; flex-shrink: 0; }
        @media (min-width: 768px) { .nav { gap: 30px; } }

        .nav a {
            text-decoration: none;
            color: #666666;
            font-size: 10px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            position: relative;
            padding: 8px 12px;
            border-radius: 20px;
        }

        .nav a:hover {
            color: #333333;
            background: rgba(255, 103, 1, 0.08);
            transform: translateY(-1px);
        }

        .nav a.active {
            color: #FF6701;
            background: rgba(255, 103, 1, 0.12);
        }

        @media (max-width: 480px) {
            .logo { font-size: 10px; }
            .logo-img { width: 18px; height: 18px; margin-right: 6px; }
            .nav a { font-size: 9px; padding: 6px 8px; letter-spacing: 0.5px; }
        }

        @media (min-width: 768px) {
            .nav a { font-size: 13px; letter-spacing: 1.5px; padding: 10px 16px; }
        }

        .header-content::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 103, 1, 0.3), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .header.scrolled .header-content::after { opacity: 1; }

        /* Main Content Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        @media (min-width: 768px) { .container { padding: 0 30px; } }
        @media (min-width: 1024px) { .container { padding: 0 40px; } }

        /* Loading Animation */
        .loading {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        .loading.loaded {
            opacity: 1;
            transform: translateY(0);
        }

        /* Contact Section */
        .contact-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
            margin: 40px 0;
            min-height: 60vh;
        }

        @media (min-width: 768px) {
            .contact-section {
                grid-template-columns: 1fr 1fr;
                gap: 80px;
                margin: 60px 0;
                align-items: start;
            }
        }

        @media (min-width: 1024px) {
            .contact-section { gap: 120px; margin: 80px 0; }
        }

        /* Left Column - Contact Info */
        .contact-info {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .contact-title {
            font-size: 28px;
            font-weight: 400;
            color: #333333;
            margin-bottom: 30px;
            letter-spacing: 1px;
        }

        @media (min-width: 768px) { .contact-title { font-size: 36px; margin-bottom: 40px; } }
        @media (min-width: 1024px) { .contact-title { font-size: 42px; margin-bottom: 50px; } }

        .contact-description {
            font-size: 14px;
            color: #666666;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        @media (min-width: 768px) { .contact-description { font-size: 16px; margin-bottom: 50px; } }

        .contact-email-section {
            font-size: 14px;
            color: #666666;
            line-height: 1.6;
        }

        @media (min-width: 768px) { .contact-email-section { font-size: 16px; } }

        .contact-email {
            color: #333333;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .contact-email:hover { text-decoration: underline; }

        /* Right Column - Contact Form */
        .contact-form { width: 100%; }
        .form-group { margin-bottom: 25px; }

        .form-label {
            display: block;
            font-size: 14px;
            color: #666666;
            margin-bottom: 8px;
            font-weight: 400;
        }
        .required { color: #999999; font-size: 12px; font-weight: 300; }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            background-color: #ffffff;
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            color: #333333;
            transition: border-color 0.3s ease;
            outline: none;
        }

        .form-input:focus, .form-textarea:focus { border-color: #FF6701; }
        .form-textarea { min-height: 120px; resize: vertical; }

        .submit-btn {
            background: linear-gradient(to bottom, #FFC288, #FF6701);
            color: #ffffff;
            border: none;
            padding: 15px 30px;
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .submit-btn:hover {
            background: linear-gradient(to bottom, #FEA82F, #FF6701);
            transform: translateY(-1px);
        }
        .submit-btn:active { transform: translateY(0); }

        /* Footer - Standardized */
        .footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
            background: #ffffff;
            border-top: 1px solid rgba(0,0,0,0.05);
        }

        @media (max-width: 480px) { .footer { padding: 20px 0; margin-top: 30px; } }
        @media (min-width: 768px) { .footer { padding: 40px 0; margin-top: 50px; } }
        @media (min-width: 1024px) { .footer { padding: 50px 0; margin-top: 60px; } }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        @media (min-width: 768px) { .social-icons { gap: 30px; } }

        .social-icon img {
            width: 20px;
            height: 20px;
            object-fit: contain;
            transition: transform 0.3s ease;
            opacity: 0.8;
        }

        @media (max-width: 480px) { .social-icon img { width: 18px; height: 18px; } }
        @media (min-width: 768px) { .social-icon img { width: 24px; height: 24px; } }
        @media (min-width: 1024px) { .social-icon img { width: 28px; height: 28px; } }

        .social-icon:hover img { transform: scale(1.1); opacity: 1; }

        .copyright {
            font-size: 12px;
            color: #999;
            font-weight: 500;
        }

        /* Success message styling */
        #success-message {
            color: #FEA82F;
            font-weight: 500;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(254, 168, 47, 0.1);
            border-radius: 5px;
            border-left: 4px solid #FEA82F;
        }

        /* --- AI CHATBOT STYLES --- */
        .fab-chat {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--brand-gradient);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 8px 25px rgba(255, 103, 1, 0.4);
            cursor: pointer;
            z-index: 2000;
            transition: all 0.3s ease;
            border: none;
        }

        .fab-chat:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 12px 30px rgba(255, 103, 1, 0.5);
        }

        .chat-modal {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            max-width: 85vw;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            border: 1px solid #f0f0f0;
            z-index: 2000;
            display: none;
            flex-direction: column;
            overflow: hidden;
            transform-origin: bottom right;
            animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .chat-modal.open { display: flex; }

        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .chat-header {
            background: var(--brand-gradient);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 14px;
        }

        .chat-body {
            height: 350px;
            overflow-y: auto;
            padding: 20px;
            background: #fffbf7;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .msg {
            max-width: 85%;
            padding: 10px 15px;
            border-radius: 12px;
            font-size: 13px;
            line-height: 1.5;
        }

        .msg.user {
            background: var(--primary-orange);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 2px;
        }

        .msg.bot {
            background: white;
            color: var(--text-dark);
            border: 1px solid #eee;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }

        .chat-footer {
            padding: 15px;
            background: white;
            border-top: 1px solid #f0f0f0;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            border: 1px solid #ddd;
            padding: 10px 15px;
            border-radius: 25px;
            outline: none;
            font-family: inherit;
            font-size: 13px;
            transition: border 0.3s;
        }

        .chat-input:focus { border-color: var(--primary-orange); }

        .chat-send {
            background: var(--brand-gradient);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        .chat-send:hover { transform: scale(1.05); }

        .typing-indicator {
            font-size: 11px;
            color: #999;
            margin-left: 10px;
            margin-bottom: 5px;
            display: none;
            font-style: italic;
        }

        /* --- MOBILE RESPONSIVENESS FOR CHAT --- */
        @media (max-width: 480px) {
            .fab-chat {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .chat-modal {
                width: 90%; 
                right: 5%;
                bottom: 80px; 
                max-width: none;
                max-height: 60vh;
                border-radius: 16px;
            }

            .chat-body {
                height: auto;
                min-height: 200px;
                max-height: 300px;
            }

            .chat-input { font-size: 16px; }
        }

        /* Particle Canvas */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            width: 100%;
            height: 100%;
            background: transparent;
            pointer-events: none;
        }

        /* High DPI displays optimization */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .logo-img {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
        }
    </style>
</head>
<body>

    <canvas id="particle-canvas"></canvas>

    <!-- Enhanced Sticky Header - Standardized -->
    <header class="header" id="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <img src="https://i.postimg.cc/Ss52dZKf/Avatar.png" alt="Bull Logo" class="logo-img">
                mukul visuals
            </a>

            <nav class="nav">
                <a href="index.html">HOME</a>
                <a href="contact.html" class="active">CONTACT</a>
                <a href="about.html">ABOUT</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <section class="contact-section loading">
            <!-- Left Column - Contact Info -->
            <div class="contact-info">
                <h1 class="contact-title">GET IN TOUCH.</h1>
                <p class="contact-description">
                  Feel free to reach out — I'll reply as soon as possible! Whether you need creative video work, clean animations, or have a unique vision, I'd love to bring it to life.
                  I work closely with individuals, brands, and teams to craft visuals that tell a story and make an impact. <br><br>
                  No project is too big or small — just share your idea, and we'll take it from there.
                  Looking forward to hearing from you and creating something great together!
                </p>
                <div class="contact-email-section">
                    Alternatively, email me at<br>
                    <a href="mailto:mukuluprikar@gmail.com?subject=Let%27s%20Connect&body=Hi%20Mukul%2C%0AI%20wanted%20to%20reach%20out%20about..." class="contact-email">
                        mukuluprikar@gmail.com
                    </a>
                </div>
            </div>

            <!-- Right Column - Contact Form -->
            <form class="contact-form" action="https://formspree.io/f/mjkoeagw" method="POST">
                <div class="form-group">
                    <label for="name" class="form-label">
                        Name <span class="required">(required)</span>
                    </label>
                    <input type="text" id="name" name="name" class="form-input" required>
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">
                        Email Address <span class="required">(required)</span>
                    </label>
                    <input type="email" id="email" name="email" class="form-input" required>
                </div>

                <div class="form-group">
                    <label for="subject" class="form-label">
                        Subject <span class="required">(required)</span>
                    </label>
                    <input type="text" id="subject" name="subject" class="form-input" required>
                </div>

                <div class="form-group">
                    <label for="message" class="form-label">
                        Message <span class="required">(required)</span>
                    </label>
                    <textarea id="message" name="message" class="form-textarea" required></textarea>
                </div>

                <button type="submit" class="submit-btn">SUBMIT</button>
            </form>

            <p id="success-message" style="display:none;">
              Thanks! Your message has been sent.
            </p>
        </section>
    </main>

    <!-- Footer - Standardized -->
    <footer class="footer">
        <div class="social-icons">
            <a href="https://www.instagram.com/mukull.edits/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Visit Instagram profile">
                <img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" alt="Instagram" />
            </a>
            <a href="www.youtube.com/@mukull_edits" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Visit YouTube channel">
                <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YouTube" />
            </a>
            <a href="https://twitter.com/skymography" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Visit Twitter profile">
                <img src="https://cdn-icons-png.flaticon.com/512/733/733579.png" alt="Twitter" />
            </a>
            <a href="https://www.linkedin.com/in/skymography" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Visit LinkedIn profile">
                <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" />
            </a>
        </div>
        <div class="copyright">
            © 2025 Mukul Visuals. All rights reserved.
        </div>
    </footer>

    <!-- AI CHAT UI -->
    <button class="fab-chat" onclick="toggleChat()">
        <i class="fas fa-comment-dots"></i>
    </button>

    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <span>✨ AI Assistant</span>
            <i class="fas fa-times" style="cursor:pointer;" onclick="toggleChat()"></i>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="msg bot">Hello! I'm your MukulVisuals assistant. Have questions about hiring me?</div>
        </div>
        <div class="typing-indicator" id="typingIndicator">AI is typing...</div>
        <div class="chat-footer">
            <input type="text" class="chat-input" id="chatInput" placeholder="Ask a question..." onkeypress="handleKeyPress(event)">
            <button class="chat-send" onclick="sendChat()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // Enhanced sticky header functionality
        function initStickyHeader() {
            const header = document.getElementById('header');
            let lastScrollY = window.scrollY;
            let ticking = false;

            function updateHeader() {
                const scrollY = window.scrollY;
                if (scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
                lastScrollY = scrollY;
                ticking = false;
            }

            function requestTick() {
                if (!ticking) {
                    requestAnimationFrame(updateHeader);
                    ticking = true;
                }
            }

            window.addEventListener('scroll', requestTick, { passive: true });
        }

        // Loading animation with intersection observer
        function initLoadingAnimations() {
            if (!('IntersectionObserver' in window)) {
                document.querySelectorAll('.loading').forEach(el => {
                    el.classList.add('loaded');
                });
                return;
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('loaded');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            document.querySelectorAll('.loading').forEach(el => {
                observer.observe(el);
            });
        }

        if (window.location.search.includes('success=1')) {
            document.getElementById('success-message').style.display = 'block';
        }

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Form field focus effects
        document.querySelectorAll('.form-input, .form-textarea').forEach(field => {
            field.addEventListener('focus', function() {
                this.style.borderColor = '#FF6701';
            });
            
            field.addEventListener('blur', function() {
                if (!this.value) {
                    this.style.borderColor = '#ddd';
                }
            });
        });

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initLoadingAnimations();
            initStickyHeader();
            
            setTimeout(() => {
                document.querySelectorAll('.loading').forEach(el => {
                    el.style.transition = 'all 0.6s ease';
                });
            }, 100);
        });

        // Handle orientation change
        window.addEventListener('orientationchange', function() {
            setTimeout(() => {
                document.body.style.display = 'none';
                document.body.offsetHeight;
                document.body.style.display = '';
            }, 100);
        });

        // Prevent zoom on double tap for iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>

    <script>
    // Particle canvas animation
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function createParticles() {
        particles = [];
        for (let i = 0; i < 30; i++) {
            particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            r: Math.random() * 0.4 + 0.4,
            dx: (Math.random() - 0.5) * 0.3,
            dy: (Math.random() - 0.0) * 0.3
            });
        }
    }

    function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particles.forEach(p => {
            p.x += p.dx;
            p.y += p.dy;

            if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
            if (p.y < 0 || p.y > canvas.height) p.dy *= -1;

            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
            ctx.fillStyle = '#000000';
            ctx.fill();
        });

        requestAnimationFrame(animateParticles);
    }

    createParticles();
    animateParticles();
    </script>

    <!-- AI CHAT LOGIC -->
    <script>
        // Helper to grab page content for AI Context
        function getPageContext() {
            // Get the contact info and description
            const info = document.querySelector('.contact-info')?.innerText || "";
            // Get the form labels to understand what data is collected
            const form = document.querySelector('.contact-form')?.innerText || "";
            return `CONTACT INFO:\n${info}\n\nFORM FIELDS:\n${form}`;
        }

        async function callPollinationsAPI(systemPrompt, userPrompt) {
            // Pollinations is a free, open-source AI API that doesn't require a key
            const url = 'https://text.pollinations.ai/';
            
            const payload = {
                messages: [
                    { role: 'system', content: systemPrompt },
                    { role: 'user', content: userPrompt }
                ],
                model: 'openai', 
                seed: Math.floor(Math.random() * 1000) 
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    const text = await response.text();
                    return text.replace(/\*\*Support Pollinations\.AI:\*\*[\s\S]*/, '').trim();
                } else {
                    console.error("API Error:", response.status);
                    return "I'm having trouble connecting right now. Please try again later.";
                }

            } catch (error) {
                console.error("Fetch Error:", error);
                return "Sorry, connection failed. Please check your internet.";
            }
        }

        function toggleChat() {
            const modal = document.getElementById('chatModal');
            modal.classList.toggle('open');
        }

        document.addEventListener('click', function(event) {
            const modal = document.getElementById('chatModal');
            const fab = document.querySelector('.fab-chat');
            
            if (modal.classList.contains('open') && 
                !modal.contains(event.target) && 
                !fab.contains(event.target)) {
                modal.classList.remove('open');
            }
        });

        function handleKeyPress(e) {
            if (e.key === 'Enter') sendChat();
        }

        async function sendChat() {
            const input = document.getElementById('chatInput');
            const body = document.getElementById('chatBody');
            const indicator = document.getElementById('typingIndicator');
            const question = input.value.trim();
            
            if (!question) return;

            // UI Updates
            body.innerHTML += `<div class="msg user">${question}</div>`;
            input.value = "";
            body.scrollTop = body.scrollHeight;
            indicator.style.display = 'block';

            // Context Preparation
            const context = getPageContext();

            const systemPrompt = `You are a helpful assistant for MukulVisuals on the Contact Page.
            Here is the information available on this page:
            ${context}
            
            Answer the user's question based strictly on this context. 
            If they ask about pricing or specific projects not mentioned here, suggest they use the contact form to ask directly.
            Keep answers brief and professional.`;

            // Call the new free API
            const answer = await callPollinationsAPI(systemPrompt, question);
            
            indicator.style.display = 'none';
            body.innerHTML += `<div class="msg bot">${answer}</div>`;
            body.scrollTop = body.scrollHeight;
        }
    </script>

</body>
</html>